<!doctype html>
<html ng-app="UK" ng-controller="middle">
	<head>
		<meta charset="UTF-8">
		<meta name="description" content="Nejlep코칤 budovatelsk치 hra na sv캩t캩!">
		<title>Ukradyjam: HD edition</title>
		<script>
// Do not execute this function unless you are a skilled H4CK0R!!!
			let get_HACKER_achievement = function() {
				game.achieve('hacker');
				forceDigest();
			};
		</script>
		<script src="libs/angular.min.js"></script>
		<script src="app/misc.js" type="text/javascript"></script>
		<script src="app/middle.js" type="text/javascript"></script>
		<script src="app/game.js" type="text/javascript"></script>
		<script src="app/data.js" type="text/javascript"></script>
		<script src="app/dataWis.js" type="text/javascript"></script>
		<script src="app/ng/directives.js" type="text/javascript"></script>
		<link rel="stylesheet" href="app/style.css">
	</head>
	<body ng-keyup="listen4Esc($event)">
<div id="header">
	<span class="fakeLink" ng-click="window('intro2')">칔vod</span>
	<span class="fakeLink" ng-click="window('achievements')">Achievmenty</span>
	<span class="fakeLink" ng-click="window('options')">Nastaven칤</span>
	<span>Verze {{version.join('.')}}</span>
</div>

<div ng-repeat="m in s.messages track by $index" class="popup" ng-style="getPopupStyle($index)">
	<p ng-repeat="l in parseMessage(m)">{{l}}</p>
	<p style="text-align: center;"><input type="button" ng-click="s.messages.splice($index, 1)" value="OK" title="Esc"></p>
</div>

<!-- GAME BOX -->
<div id="gameContainer" ng-style="mergeStyles(['containerLeft', 'containerHeight', 'gameWidth'])" ng-switch="ctrl.window">

	<div ng-switch-when="intro">
		<div ng-include="'app/ng/intro.html'"></div>
		<p style="text-align: center;"><input type="button" ng-click="initGame();" value="POKRA캛OVAT"></p>
	</div>

	<div ng-switch-when="intro2">
		<escape-win></escape-win>
		<div ng-include="'app/ng/intro.html'"></div>
	</div>

	<div ng-switch-when="achievements" ng-style="mergeStyles(['containerHeight', 'gameWidth'])" id="achievements">
		<escape-win></escape-win>
		<h1>Achievements</h1>
		<div ng-if="getAchievementGoals().length > 0"><p>Tyto 칰sp캩chy m콢쬰te splnit: <a class="fakeLink" ng-click="showTODO = !showTODO">{{showTODO ? 'Skr칳t' : 'Vypsat'}}</a></p>
		<ul ng-if="showTODO">
			<li ng-repeat="g in getAchievementGoals()">{{g}}</li>
		</ul></div>
		<hr>
		<p>Spln캩no {{s.achievements.length}}/{{getAchievementCount()}}, <i>kurz칤va zna캜칤 skryt칳 achievement</i>:</p>
		<div ng-repeat="a in s.achievements" ng-class="{secret: achs[a].secret}">
			<p><b>{{achs[a].name}}</b> ({{achs[a].description}})<br>
			{{achs[a].flavor}}</p>
			<p></p>
		</div>
	</div>

	<div ng-switch-when="options">
		<escape-win></escape-win>
		<h1>Nastaven칤</h1>
		<p>Velikost okna: <select ng-model="ctrl.zoom" ng-options="x for x in zoomOptions" ng-change="resize()"></select></p>
		<p><input type="button" onclick="purgeSave()" value="Smazat save"></p>
	</div>

	<div ng-switch-when="game">
		<div id="topBar" ng-style="style.gameWidth">
			<div id="suroviny" ng-style="style.suroviny">
				<div ng-repeat="i in icons" ng-class="{skladOverflow: isOverflow($index)}" ng-click="accessMine(mineNames[$index])"
					title="{{(isOverflow($index) ? 'Je t콏eba dostav캩t sklad, kapacita je zcela napln캩na!' : '')}}">
					<img ng-src="res/GUI/icon_{{i}}.png">{{s.sur[$index].toFixed(0)}}&nbsp;
				</div>
			</div>
			<div id="assistents">
				<img src="res/GUI/head_starosta.png" ng-click="tab('advisorEco')" class="clickImg" title="Starosta">
				<img src="res/GUI/head_vojak.png" ng-click="tab('advisorArmy')" class="clickImg" title="Gener치l">
				<img src="res/GUI/head_vedec.png" ng-click="tab('advisorScience')" class="clickImg" title="V칳zkumn칤k">
			</div>
		</div>

		<div id="screen" ng-switch="ctrl.tab" ng-style="screenStyle()">

		<!-- CITY -->
			<div ng-switch-when="city" ng-style="mergeStyles(['gameWidth', 'gameHeight', 'city'])" ondrop="drag.drop(event)" ondragover="drag.allowDrop(event)">
				<input type="button" class="switch" ng-click="tab('island')" value="OSTROV">
				<img src="res/GUI/icon_build.png" style="margin: 5px;" ng-show="getAvailableBuild().length > 0" ng-click="ctrl2.showBuildingList = !ctrl2.showBuildingList" class="clickImg">

				<!-- existing buildings-->
				<img ng-repeat="b in sortBuildings()" ng-src="res/build/{{buildings[b.id].img}}" ng-click="tab(b.id)" ng-style="getBuildingStyle(b)" title="{{buildings[b.id].name + ' ' + b.lvl}}"
					draggable="{{b.draggable}}" ondragstart="drag.dragStart(event)" ng-class="{building: b.draggable, clickImg: !b.draggable}" index="{{$index}}">
				
				<!-- construction interface -->
				<div id="buildingList" ng-show="ctrl2.showBuildingList" ng-style="style.buildingList">
					<table>
						<tr ng-repeat="b in getAvailableBuild()">
							<td>
								<img ng-src="res/build/{{buildings[b].img}}" ng-click="buyBuilding(b)" class="clickImg buildOption">
							</td><td>
								<b>{{buildings[b].name}}</b>&nbsp;
								<span ng-repeat="i in icons" ng-if="buildings[b].price(1)[$index] > 0">
									<img ng-src="res/GUI/icon_{{i}}.png" width="16" height="16">
									{{buildings[b].price(1)[$index].toFixed(0)}}</span>
								<br>
								{{buildings[b].flavor}}
							</td>
						</tr>
					</table>
				</div>
			</div>

		<!-- ISLAND -->
			<div ng-switch-when="island" ng-style="mergeStyles(['gameWidth', 'gameHeight', 'island'])">
				<input type="button" class="switch" ng-click="tab('city')" value="M캨STO">

				<img src="res/env/prod_pila.png" ng-style="styleislandPila()" ng-click="accessMine('islandPila')" title="Pila" class="clickImg">
				<img src="res/env/prod_kamen.png" ng-style="islandPos('plaz')" ng-click="accessMine('islandKamen')" title="Kamenit치 pl치" class="clickImg">
				<img src="res/env/prod_syra.png" ng-style="islandPos('syra')" ng-click="accessMine('islandSyra')" title="Kr치vy" class="clickImg">
				<img src="res/env/prod_pivo.png" ng-style="islandPos('pivo')" ng-click="accessMine('islandPivo')" title="Pivn칤 plo코ina" class="clickImg">

				<img src="res/env/polis_4.png" ng-style="islandPos('myPolis')" ng-click="tab('city')" class="clickImg">
				<span ng-style="islandPos('myPolisName')" class="strong clickImg" ng-click="tab('city')">{{s.name}}</span>
				<img src="res/env/polis_1.png" ng-style="islandPos('enemyPolis')" ng-click="tab('islandPolis')" class="clickImg">
				<span ng-style="islandPos('enemyPolisName')" class="strong clickImg" ng-click="tab('islandPolis')">Polis</span>
			</div>

		<!-- BATTLE -->
			<div ng-switch-when="battle" ng-style="mergeStyles(['gameWidth', 'gameHeight', 'battle'])">
				battle
			</div>

		<!-- ADVISOR SCREEN TABS -->
			<div ng-switch-when="advisorEco" ng-style="screenStyle()">
				<escape></escape><!--directive for escape button-->
				<h2>Ekonomick칳 p콏ehled</h2>
				<p>Starosta ti pom콢쬰 s vyd캩l치v치n칤m prach콢 a managementem 코pinav칠ho plebsu.</p>
				<p><b>Finance</b></p>
				<table class="numTable">
					<tr class="tip" title="poplatn칤ci 췅 3 췅 칰캜innost v칳b캩ru"><td>Da켿ov칳 v칳b캩r:</td>
						<td>{{demMulti([s.pop[0], consts.tax], [game.eff().prachy])}}</td>
					</tr>
					<tr class="tip" title="d캩ln칤ci 췅 3 췅 v칳코e plat콢"><td>Platy d캩ln칤k콢:</td>
						<td>{{demMulti([(game.popTotal() - s.pop[0]), -consts.wage], [game.eff().plat])}}</td>
					</tr>
					<tr class="tip" title="za v코echny budovy, roste exponenci치ln캩 s 칰rovn칤"><td>칔dr쬭a m캩sta:</td>
						<td>{{demMulti([-game.moneyMaintenance()/game.eff().udrzba], [game.eff().udrzba])}}</td>
					</tr>
					<tr><td>&sum;</td><td>{{game.moneyTotal().withSign()}}</td></tr>
				</table>
				<hr>
				<p><b>T캩쬭a</b></p>
				<table class="numTable tip" title="d캩ln칤ci 췅 칰캜innost">
					<tr><td>D콏evo:</td>  <td>{{demMulti([s.pop[1]], [game.eff().drevo])}}</tr>
					<tr><td>Kamen칤:</td> <td>{{demMulti([s.pop[2]], [game.eff().kamen])}}</tr>
					<tr><td>S칳ra:</td>   <td>{{demMulti([s.pop[3]], [game.eff().syra])}}</tr>
					<tr><td>Pivo:</td>   <td>{{demMulti([s.pop[4]], [game.eff().pivo])}}</tr>
				</table>
				<hr>
				<p><b>Pr콢zkum ve콏ejn칠ho vygeben칤</b></p>
				<table class="numTable">
					<tr><td>z치klad:  </td><td> {{game.happyBase().withSign()}}</td></tr>
					<tr><td>populace:</td><td> {{(-game.popTotal()).withSign()}}</td></tr>
					<tr ng-if="game.happyHospoda() > 0"> <td>pivo:</td>   <td>{{game.happyHospoda().withSign()}}</td></tr>
					<tr ng-if="game.happyMuzeum() > 0">  <td>muzeum:</td> <td>{{game.happyMuzeum().withSign()}}</td></tr>
					<tr ng-if="game.happySklad() < 0">   <td>sklad:</td>  <td>{{game.happySklad().withSign()}}</td></tr>
					<tr ng-if="game.happyPalac() < 0">   <td>pal치c:</td>  <td>{{game.happyPalac().withSign()}}</td></tr>
					<tr><td>&sum;</td><td>{{game.realHappiness().withSign()}}</td></tr>
				</table>
			</div>

			<div ng-switch-when="advisorArmy" ng-style="screenStyle()">
				<escape></escape>
				<h2>Strategick칳 p콏ehled</h2>
				<p>Gener치l ti napl치nuje v코echna slavn치 vojensk치 ta쬰n칤 a mo쬹치 n캩kdy i vyhraje.</p>
				<p>TODO: ODKAZ NA B캨콯칈C칈 BITVU</p>
				<hr>
				<div ng-if="ctrl2.generalView">
					<p><span class="strong">P콏ehled arm치dy ve m캩st캩</span> <a class="fakeLink" ng-click="ctrl2.generalView = false">zobrazit z치znamy bitev</a></p>
					<p>
						<span class="tip" title="n치sob칤 칰tok v코ech jednotek">칔캜innost arm치dy: {{game.eff().power.toPercent()}}</span>, 
						<span class="tip" title="n치sob칤 vydrancovan칠 suroviny">칰캜innost drancov치n칤: {{game.eff().dranc.toPercent()}}</span>
					</p>
					<p></p>
					<table>
						<tr ng-repeat="(i,n) in s.army" ng-if="n > 0">
							<td><img ng-src="res\unit\{{units[i].img}}"</td>
							<td><p>
								<b>{{units[i].name}} ({{n}} ks)</b><br>
								{{units[i].flavor}}<br>
								칰tok: {{units[i].att}}, v칳dr: {{units[i].hp}}
							</p></td>
						</tr>
					</table>
				</div>
				<div ng-if="!ctrl2.generalView">
					<p><span class="strong">Z치znamy bitev</span> <a class="fakeLink" ng-click="ctrl2.generalView = true">zobrazit p콏ehled arm치dy</a></p>
					<p>Nic</p>
				</div>
			</div>

			<div ng-switch-when="advisorScience" ng-style="screenStyle()">
				<escape></escape>
				<h2>V칳zkumn칳 p콏ehled</h2>
				<p>V캩dec ti vynalezne nejr콢zn캩j코칤 technologie - u쬴te캜n치 hnojiva i 코칤len칠 rovnice!</p>
				<p>
					Po캜et v칳zkumn칳ch bod콢: {{s.WP}}<br>
					<span class="tip" title="po캜et v칳zkumn칳ch bod콢 za jeden cyklus">Rychlost v칳zkumu: {{game.rateWP()}}</span>
				</p>
				<div ng-repeat="g in WPgroups">
					<p><b>{{WPgroupNames[$index]}}</b></p>
					<div ng-repeat="w in getAvailableWis(g)" style="padding-left: 20px;">
						<p><a class="fakeLink" ng-click="game.buyResearch(w)">{{w.name}}</a> ({{w.cost}})<br>
						{{w.teaser}}</p>
					</div>
				</div>
				
			</div>
			

		<!-- CITY SCREEN TABS -->
			<div ng-switch-when="radnice" ng-style="screenStyle()">
				<escape></escape>
				<building-details key="ctrl.tab"></building-details>
				<hr>
				<p><b>P콏ehled m캩sta {{s.name}}:</b> <a ng-click="renameCity()" class="fakeLink">p콏ejmenovat</a></p>
				<p>
					<span class="tip" title="Celkov치 populace v캜etn캩 d캩ln칤k콢">Populace</span>: {{game.popTotal()}}<br>
					<span class="tip" title="Voln치 m칤sta na z치chodech radnice">Popula캜n칤 limit</span>: {{game.popLimit()}}<br>
					<span class="tip" title="M칤ra vytlemenosti obyvatel">Vygebenost</span>: {{game.realHappiness()}}<br>
					<span class="tip" title="R콢st populace za jeden cyklus, po캜칤t치 se jako vygebenost/50">R콢st populace</span>: {{game.popGrowth().withSign()}}<br>
					Zalo쬰no: p콏ed {{s.iteration}} cykly.
				</p>
			</div>

			<div ng-switch-when="skola" ng-style="screenStyle()">
				<escape></escape>
				<building-details key="ctrl.tab"></building-details>
				<hr>
				<p>
					맒ola vytv치콏칤 v칳zkumn칠 body, v칳zkumy se pak kupuj칤 v okn캩 v캩dce<br>
					Po캜et v칳zkumn칳ch bod콢: {{s.WP}}<br>
					<span class="tip" title="po캜et v칳zkumn칳ch bod콢 za jeden cyklus">Rychlost z칤sk치v치n칤 bod콢:
					{{demMulti([game.rateWP()/game.eff().skola], [game.eff().skola]) }}</span>
				</p>
			</div>

			<div ng-switch-when="pristav" ng-style="screenStyle()">
				<escape></escape>
				<building-details key="ctrl.tab"></building-details>
				<hr>
				<trade-slider></trade-slider>
			</div>

			<div ng-switch-when="kasarna" ng-style="screenStyle()">
				<escape></escape>
				<building-details key="ctrl.tab"></building-details>
				<training building="'kasarna'"></training>
<!-- TODO -->
			</div>

			<div ng-switch-when="sklad" ng-style="screenStyle()">
				<escape></escape>
				<building-details key="ctrl.tab"></building-details>
				<hr>
				<p>Kapacita surovin (krom캩 zlata):</p>
					<table class="numTable">
					<tr><td>Z치klad</td><td>{{consts.baseSklad}}</td></tr>
					<tr><td>Sklad</td><td>{{game.storage() - consts.baseSklad}}</td></tr>
					<tr><td>&sum;</td><td>{{game.storage()}}</td></tr>
					</table>
				<p>Ob캜an콢m se v코ak tato 칰쬬sn치 hospod치콏sk치 struktura o코kliv칤, co vyjad콏uj칤 -50 vygebenost칤 za ka쬯ou 칰rove켿.</p>
			</div>

			<div ng-switch-when="hospoda" ng-style="screenStyle()">
				<escape></escape>
				<building-details key="ctrl.tab"></building-details>
				<hr>
				<p>
					Roz코칤콏en칤 zahr치dky, baru a pos칤len칤 obsluhy n치m umo쮄갓je zv칳코it pravideln칳 p콏칤d캩l piva, p콏i캜em ka쬯치 칰rove켿 p콏칤d캩lu piva vygeb칤 obyvatelstvo o 150.
				</p><p>
					<img src="res/GUI/icon_pivo.png">&nbsp;
					<input type="range" class="distributeSlider" step="1" min="0" max="{{game.getBlvl('hospoda')}}" ng-model="ctrl2.beer" ng-change="distributeBeer()">
				</p><p>
					Nastaven칳 p콏칤d캩l: <b>{{game.pridelHospoda()}}</b><br>
					Bonus vygebenosti: +{{game.happyHospoda()}}<br>
					Celkov치 vygebenost: {{game.realHappiness()}}
				</p>
			</div>

			<div ng-switch-when="dilna" ng-style="screenStyle()">
				<escape></escape>
				<building-details key="ctrl.tab"></building-details>
				<training building="'dilna'"></training>
			</div>

			<div ng-switch-when="zkusebna" ng-style="screenStyle()">
				<escape></escape>
				<building-details key="ctrl.tab"></building-details>
				<training building="'zkusebna'"></training>
			</div>

			<div ng-switch-when="palac" ng-style="screenStyle()">
				<escape></escape>
				<building-details key="ctrl.tab"></building-details>
				<hr>
				<p>S ka쬯ou 칰rovn칤 pal치ce se mi 쬴je o dost l칠pe a na코e 콏칤코e je mocn캩j코칤.</p>
				<p>칔캜inky:
					<ul>
						<li>+10% v칳b캩r dan칤</li>
						<li>+10% t캩쬭a d콏eva</li>
						<li>+5% t캩쬭a kamen칤, s칳ry a piva</li>
						<li>-5% 칰dr쬭a m캩sta</li>
						<li>-5% plat d캩ln칤k콢</li>
						<li>-100 vygebenost</li>
					</ul>
				</p>
			</div>

			<div ng-switch-when="muzeum" ng-style="screenStyle()">
				<escape></escape>
				<building-details key="ctrl.tab"></building-details>
				<hr>
				<p>
					Muzeum zlep코uje dopravn칤 obslu쬹ost m캩sta, co obyvatel칠 p콏ij칤maj칤 s povd캩kem a ocen칤 to zv칳코en칤m sv칠 vygebenosti o 100 za ka쬯ou 칰rove켿.
				</p>
			</div>

			<div ng-switch-when="kostel" ng-style="screenStyle()">
				<escape></escape>
				<building-details key="ctrl.tab"></building-details>
				<p>
					칔rove켿 kostela zesiluje efekt z치zrak콢 a sni쬿je dobu 캜ek치n칤 na dal코칤 ritu치l.<br>
					Z칤skan칳 z치zrak je ov코em v쬯y n치hodn칳, n캩kdy pozitivn칤, n캩kdy negativn칤.
				</p>
				<hr>
				<div ng-if="s.mirCountdown > 0">
					<p><b>{{miracles[s.miracle].name}}</b>, nad n치mi bude opatrovat je코t캩 {{s.mirCountdown}} cykl콢.</p>
					<p>{{miracles[s.miracle].flavor}}</p>
					<p>{{miracles[s.miracle].description(game.getBlvl('kostel'))}}</p>
				</div>

				<div ng-if="s.mirCountdown === 0 && s.mirCooldown > 0">
					<p class="strong">Prov칠st ob캩콘 boh콢m</p>
					<p>Na코i kn캩쮂 jsou zcela vy캜erp치n칤 po zvr치cen칳ch satanistick칳ch orgi칤ch 游땓<br>
					Bude trvat je코t캩 {{s.mirCooldown}} cykl콢, ne se budeme moci op캩t 칰캜inn캩 rouhat.</p>
				</div>

				<div ng-if="s.mirCountdown === 0 && s.mirCooldown === 0" style="text-align: center;">
					<p class="strong">Prov칠st ob캩콘 boh콢m</p>
					<p>游뗵 {{consts.mirPrice.pop}} <img src="res/GUI/icon_zlato.png" width="16" height="16"> {{consts.mirPrice.zlato}}</p>
					<img src="res/GUI/darkritual.png" class="clickImg" id="darkritual" ng-click="game.darkRitual()">
				</div>
			</div>

		<!-- ISLAND SCREEN TABS -->
			<div ng-switch-when="islandPila" ng-style="screenStyle()">
				<escape></escape>
				<h2>Pila</h2>
				<p>Mo쬹치 to mnoh칠 p콏ekvap칤, ale tento neobvykl칳 pr콢myslov칳 are치l ve skute캜nosti slou쮂 ke zpracov치n칤 pok치cen칳ch strom콢 na prkna.</p>
				<resource-slider i="1"></resource-slider>
			</div>

			<div ng-switch-when="islandKamen" ng-style="screenStyle()">
				<escape></escape>
				<h2>Pl치</h2>
				<p>Kamenit치 pl치, kde m콢쬰me sb칤rat obl치zky na dekoraci m캩stsk칳ch staveb. Mo쬹치 by se 코utry daly i t캩쬴t ze sk치ly, ale to by dalo moc pr치ce.</p>
				<resource-slider i="2"></resource-slider>
			</div>

			<div ng-switch-when="islandSyra" ng-style="screenStyle()">
				<escape></escape>
				<h2>Krav칤n</h2>
				<p>Proslun캩n치 louka se sv캩쮂 tr치vou, kde se pasou kr치vy. M콢쬰me z nich dojit 캜erstvou s칳ru pro na코e v치le캜n칠 operace.</p>
				<resource-slider i="3"></resource-slider>
			</div>

			<div ng-switch-when="islandPivo" ng-style="screenStyle()">
				<escape></escape>
				<h2>Pivn칤 plo코ina</h2>
				<p>Hlubok칳m vrtem se t캩쮂 pivn칤 vrstva le쮂셖칤 pod mo콏sk칳m dnem. Je to sice hnusn치 b콏e캜ka, ale n캩jak칳 alkohol v tom je, tak쬰 to lid칠 r치di vypij칤.</p>
				<resource-slider i="4"></resource-slider>
			</div>

			<div ng-switch-when="islandPolis" ng-style="screenStyle()">
				<escape></escape>
				<h2>Polis</h2>
				<p>Nep콏치telsk치 vesnice, kter치 jist캩 skr칳v치 ohromn칠 bohatstv칤 zral칠 k uloupen칤!</p>
				<p>TADY BUDE: pokud neprob칤h치 bitva tak tla캜칤tko za칰to캜it, pokud ano, tak m칤sto n캩j tla캜칤tko pos칤lit bitvu, plus obrovsk칳 n치pis vl칠zt do bitvy.</p>
			</div>

		</div>
	</div>
</div>

<div id="footer" ng-style="style.footer">
	Vytvo콏il <a href="http://jira.zby.cz/">Ji콏칤 Zbytovsk칳</a> a <span class="fakeLink">Martin Mach</span> v roce 2019 za pou쬴t칤 <a href="https://angularjs.org/">AngularJS</a>
</div>

	</body>
</html>
